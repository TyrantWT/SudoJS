# 为啥要写这个游戏？

1. 因为我儿子二年级数字下册最后一章讲到了数独。他想玩儿。
1. 因为我也想玩有提示功能的数独。
1. 因为我也正想决定要把HTML5和JS搞搞熟。熟悉一个编程平台，最好的办法，就是了解其原理与思想之后，做个真正完整的东西练练。

之前一直搞.net，后来管理事务多了，很多技术就没跟上，看过一些JS的书，但一直没动手，前几个月，写了第一个JS程序，是一个简单的产品规则引擎，利用v8引擎集成在.net程序中，用脚本来处理产品费用有关的计算。但那个只涉及数值计算。

这几天因为儿子的课本上学逻辑推理，有个数独游戏，儿子大感兴趣，玩了几个，想到如果能自动计算可选数字的话，就会很容易解开数独，在网上找来找去，发现都没有这样功能的数独。正好有点空闲，就决定自已写一个。

所以这个数独是我写的第二个JS程序。在写的过程中也在同时学习。

# canvas与windows的图形程序原理的不同

一开始，免不了受之前经验的影响，想用windows form的图形程序原理来处理html5 canvas的绘图。但发现有点水土不服：windows的图形程序原理是说系统不管保存程序自己窗口里内容，有需要显示时——比如从后台切到前台啦、刚从别的程序下面露出脸来啦等等——就请程序自己再画一遍。所以，程序只需要重写form的OnPaint方法（对于win32程序，则是响应WM_PAINT消息），在其中绘制图形就行了。如果你想强制画面更新，就调用Invalidate()方法。

但在html5的canvas中，我发现浏览器是会帮canvas保存图形的，无论是被其他窗口盖到，切到后台，都没问题，只要一露出到屏幕上，原来的图形就还是在那里。这表示只要你并不想做动画效果，用canvas写图形程序要比windows程序原理更简单一些，你只要在合适的时候（鼠标点击、键盘事件等）向canvas上画图就是了。唯一要注意的，是要快点画完，别占太长时间。

#代码中的几个要点

## 类
### Sudo
### Cell
### 
## 